# –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç—Ä–æ–≥–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!

### 1. –ë–∞–∑–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–≤—ã–º–∏)
```sql
-- 1.1 –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
20250115_helper_functions.sql

-- 1.2 –ë–∞–∑–æ–≤—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
20250115_base_finance_tables.sql

-- 1.3 CRM —Å–∏—Å—Ç–µ–º–∞ (clients, deals)
20251015_crm_system.sql

-- 1.4 –°—Ç–µ–Ω–∞ (wall)
20251014_wall.sql
20251014_wall_polls.sql
20251014_wall_realtime.sql
```

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```sql
-- 2.1 –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
20251015_advanced_features.sql

-- 2.2 –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
20251015_document_versioning.sql

-- 2.3 –£—á—ë—Ç –∑–∞–ø–∞—Å–æ–≤
20251015_inventory_tracking.sql
```

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç
```sql
-- 3.1 –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç
202510141412_finance_security.sql

-- 3.2 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞—É–¥–∏—Ç–∞
20250116_fix_audit_function.sql

-- 3.3 –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞—É–¥–∏—Ç RLS
20251014_finance_rls_audit.sql

-- 3.4 –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
20250116_advanced_security.sql

-- 3.5 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
20251015_integrations_security.sql
```

### 4. –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã
```sql
-- 4.1 –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ created_by
20250116_fix_invoices_created_by.sql
```

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
```sql
-- 5.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
20250116_integrations.sql

-- 5.2 –í–∏–¥–µ–æ–≤—Å—Ç—Ä–µ—á–∏
20250116_video_meetings.sql

-- 5.3 –°–≤—è–∑—å —Å–¥–µ–ª–æ–∫ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
20250116_deals_clients_relation.sql

-- 5.4 Realtime –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è
20250116_realtime_collaboration.sql

-- 5.5 AI –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
20250116_ai_document_analysis.sql

-- 5.6 –ú—É–ª—å—Ç–∏–æ–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
20250116_multi_cloud_sync.sql
```

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ Supabase Dashboard:

### –í–∞—Ä–∏–∞–Ω—Ç 1: SQL Editor (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏
6. –ù–∞–∂–º–∏—Ç–µ **Run**
7. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ **–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ CLI
```bash
# –ï—Å–ª–∏ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω Supabase CLI
npx supabase db push

# –ò–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
npx supabase db execute --file supabase/migrations/20250115_base_finance_tables.sql
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('accounts', 'invoices', 'budgets', 'subscriptions', 'financial_operations')
ORDER BY table_name;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CRM —Ç–∞–±–ª–∏—Ü—ã
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('clients', 'deals', 'sales_stages')
ORDER BY table_name;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('video_meetings', 'integrations', 'wall_posts')
ORDER BY table_name;
```

–î–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã.

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—à–∏–±–∫–∞: "table already exists"
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `IF NOT EXISTS`). –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ.

### –û—à–∏–±–∫–∞: "relation does not exist"
–ó–Ω–∞—á–∏—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —à–∞–≥—É 1.

### –û—à–∏–±–∫–∞: "operator does not exist"
–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è `fn_write_audit`. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ `20250116_fix_audit_function.sql`.

---

## üìù –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å, –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–Ω–∏–º—É–º:

```sql
1. 20250115_helper_functions.sql
2. 20250115_base_finance_tables.sql
3. 20251015_crm_system.sql
4. 20250116_fix_audit_function.sql
5. 20250116_fix_invoices_created_by.sql
6. 20250116_video_meetings.sql
7. 20250116_integrations.sql
8. 20250116_deals_clients_relation.sql
```

–û—Å—Ç–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–∑–∂–µ.

---

**–í–∞–∂–Ω–æ**: –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!
